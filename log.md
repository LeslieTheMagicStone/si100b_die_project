# 更新日志

## 1/13 前
1. 将`Scene`类作为最小单位，`update()`， `render()`等在`Scene`中进行，方便模块化增加场景，减少对`Gamemanager`的修改
2. `Attributes`添加抽象标签`Collidable`(可碰撞)， `MonoBehavior`(update()行为)，`Renderable`(可渲染，不同于`Sprite`，有`render_index`以定义渲染优先级)，不同标签代表不同功能
3. 添加工具类`Math`进行向量计算
4. 简化`Scene`逻辑，每个场景有一个`_objects`列表存储所有游戏物体，根据游戏物体的标签`Attributes`来调用其对应函数
5. 添加生成器模组`generator`，全局可以引用，作用是把实例添加到当前场景的`_objects`列表中

## 1/13
1. 添加障碍物，障碍物不会生成在指定物体周围（玩家，传送门等）
2. 添加碰撞检测系统：只要把`Collidable`类的`is_rigid`设为`True`，位移方法从`self.rect.move_ip(dx, dy)`改为用`self.velocity = (dx, dy)`即可
3. 手感优化：把玩家的碰撞框改小了，图像大小不变，玩家不容易被子弹打到/不容易被障碍物卡住

## 1/14
1. 添加子弹
2. 添加伤害系统
3. 添加删除游戏物体功能，可全局调用，作用是把实例从当前场景的`_objects`列表中删去
4. 添加血条显示

## 1/15
1. 添加角色动画
2. 优化`Math`类，使各个函数的输出类型和输入保持一致（`tuple`->`tuple`, `list`->`list`）

## 1/17
1. 添加摄像机
2. 添加游戏边界
3. 添加视觉特效类`Effect`, 可以用`EffectManager.generate()`全局生成特效
4. 添加子弹击中特效，造成伤害数字，玩家出生特效
5. 现在能根据`Collidable.velocity`预测碰撞，更新碰撞列表

## 1/24
1. 添加墙壁
2. 更新热身小游戏
3. 添加globals.Input.key_down，记录正被第一帧按下的按键
4. 添加角色受伤机制

## 1/25
1. 添加子弹碰实体（墙，障碍物等）爆炸效果
2. 添加角色受到攻击时虚化特效
3. 更新小怪房，添加冰火怪
4. 添加道具房，添加拾取道具文本
5. 更新输入系统
6. 添加文本框翻页功能
7. 解决输入延迟问题

## 1/26
1. 添加对话npc
2. 添加经验系统
3. 添加美术细节

## 1/27
1. 添加音效播放类`SoundPlayer`
2. 添加Boss战
3. 添加商店